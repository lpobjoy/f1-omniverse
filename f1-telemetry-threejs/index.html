<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F1 Race Control - Digital Twin</title>
    <link rel="stylesheet" href="styles.css?v=4">
</head>
<body>
    <div id="container"></div>
    
    <!-- Top Bar - Race Info -->
    <div id="top-bar">
        <div class="race-info">
            <span class="track-name">üèÅ POBSTONE GP</span>
            <span class="race-status" id="race-status">RACING</span>
        </div>
        <div class="lap-counter">
            LAP <span id="race-lap">1</span> / <span id="total-laps">50</span>
        </div>
        <div class="session-time">
            <span id="session-clock">00:00:00</span>
        </div>
    </div>
    
    <!-- Race Control Panel (Bottom) -->
    <div id="race-control">
        <div class="control-section speed-control">
            <div class="section-header">SIMULATION SPEED</div>
            <div class="speed-buttons">
                <button class="speed-btn" data-speed="0.25">0.25x</button>
                <button class="speed-btn" data-speed="0.5">0.5x</button>
                <button class="speed-btn active" data-speed="1">1x</button>
                <button class="speed-btn" data-speed="2">2x</button>
                <button class="speed-btn" data-speed="4">4x</button>
            </div>
            <input type="range" id="speed-slider" min="0.1" max="5" step="0.1" value="1">
        </div>
        
        <div class="control-section playback-control">
            <div class="section-header">PLAYBACK</div>
            <div class="playback-buttons">
                <button id="btn-restart" title="Restart Race">‚èÆ</button>
                <button id="btn-play-pause" title="Play/Pause">‚è∏</button>
                <button id="btn-step" title="Step Forward">‚è≠</button>
            </div>
        </div>
        
        <div class="control-section camera-control">
            <div class="section-header">CAMERA</div>
            <div class="camera-buttons">
                <button class="cam-btn" data-mode="follow">FOLLOW</button>
                <button class="cam-btn" data-mode="chase">CHASE</button>
                <button class="cam-btn" data-mode="helicopter">HELI</button>
                <button class="cam-btn" data-mode="orbit">ORBIT</button>
                <button class="cam-btn" data-mode="cockpit">COCKPIT</button>
                <button class="cam-btn" data-mode="tv">TV CAM</button>
            </div>
        </div>
        
        <div class="control-section driver-control">
            <div class="section-header">DRIVER</div>
            <div class="driver-selector">
                <button id="prev-driver">‚óÄ</button>
                <div class="current-driver">
                    <span id="driver-position">P1</span>
                    <span id="driver-name">Verstappen</span>
                    <span id="team-name">Red Bull</span>
                </div>
                <button id="next-driver">‚ñ∂</button>
            </div>
        </div>
        
        <div class="control-section view-options">
            <div class="section-header">VIEW OPTIONS</div>
            <div class="toggle-buttons">
                <button id="toggle-telemetry" class="toggle-btn active">TELEMETRY</button>
                <button id="toggle-leaderboard" class="toggle-btn active">STANDINGS</button>
                <button id="toggle-minimap" class="toggle-btn active">MAP</button>
                <button id="toggle-names" class="toggle-btn active">NAMES</button>
            </div>
        </div>
    </div>
    
    <!-- Telemetry Dashboard (Right Side) -->
    <div id="dashboard">
        <div class="dashboard-header">
            <h1>TELEMETRY</h1>
            <span id="driver-tag">VER #1</span>
        </div>
        
        <div class="speed-display">
            <div class="big-speed"><span id="speed-value">0</span></div>
            <div class="speed-unit">KM/H</div>
            <div class="speed-bar-container">
                <div id="speed-bar" class="speed-bar-fill"></div>
            </div>
        </div>
        
        <div class="telemetry-row">
            <div class="tel-item">
                <span class="tel-label">GEAR</span>
                <span id="gear-value" class="tel-value gear">N</span>
            </div>
            <div class="tel-item">
                <span class="tel-label">RPM</span>
                <span id="rpm-value" class="tel-value">0</span>
            </div>
            <div class="tel-item">
                <span class="tel-label">DRS</span>
                <span id="drs-status" class="tel-value drs-off">OFF</span>
            </div>
        </div>
        
        <div class="pedals-display">
            <div class="pedal throttle">
                <div class="pedal-bar">
                    <div id="throttle-bar" class="pedal-fill green"></div>
                </div>
                <span>THR <span id="throttle-value">0</span>%</span>
            </div>
            <div class="pedal brake">
                <div class="pedal-bar">
                    <div id="brake-bar" class="pedal-fill red"></div>
                </div>
                <span>BRK <span id="brake-value">0</span>%</span>
            </div>
        </div>
        
        <div class="gforce-compact">
            <div class="gforce-visual">
                <div class="gforce-circle">
                    <div id="gforce-dot" class="gforce-dot"></div>
                </div>
            </div>
            <div class="gforce-values">
                <span>LAT <span id="gforce-lat">0.0</span>G</span>
                <span>LON <span id="gforce-lon">0.0</span>G</span>
            </div>
        </div>
        
        <div class="lap-display">
            <div class="current-lap-time">
                <span class="lap-label">CURRENT</span>
                <span id="lap-time" class="lap-value">0:00.000</span>
            </div>
            <div class="best-lap-time">
                <span class="lap-label">BEST</span>
                <span id="best-lap" class="lap-value best">--:--.---</span>
            </div>
            <div class="gap-to-leader">
                <span class="lap-label">GAP</span>
                <span id="gap-leader" class="lap-value gap">+0.0s</span>
            </div>
        </div>
        
        <div class="tire-wear-display">
            <div class="tire-label">TIRES</div>
            <div class="tire-compound" id="tire-compound">MEDIUM</div>
            <div class="tire-visual">
                <div class="tire-item">
                    <div class="tire-temp" id="tire-fl">85</div>
                    <div class="tire-pos">FL</div>
                </div>
                <div class="tire-item">
                    <div class="tire-temp" id="tire-fr">85</div>
                    <div class="tire-pos">FR</div>
                </div>
                <div class="tire-item">
                    <div class="tire-temp" id="tire-rl">80</div>
                    <div class="tire-pos">RL</div>
                </div>
                <div class="tire-item">
                    <div class="tire-temp" id="tire-rr">80</div>
                    <div class="tire-pos">RR</div>
                </div>
            </div>
            <div class="wear-bar-container">
                <span>WEAR</span>
                <div class="wear-bar">
                    <div id="tire-wear-bar" class="wear-fill"></div>
                </div>
                <span id="tire-wear-pct">100%</span>
            </div>
        </div>
        
        <div class="pit-status-display">
            <div class="pit-info">
                <span class="pit-label">PIT STATUS</span>
                <span id="pit-status" class="pit-value">ON TRACK</span>
            </div>
            <div class="pit-count">
                <span class="pit-label">STOPS</span>
                <span id="pit-count" class="pit-value">0</span>
            </div>
            <div class="damage-display">
                <span class="pit-label">DAMAGE</span>
                <span id="damage-pct" class="pit-value">0%</span>
            </div>
        </div>
    </div>
    
    <!-- Mini Map (Top Right) -->
    <div id="minimap">
        <canvas id="minimap-canvas" width="200" height="200"></canvas>
    </div>
    
    <!-- Race Leaderboard (Left Side) -->
    <div id="leaderboard">
        <div class="leaderboard-header">
            <h2>RACE STANDINGS</h2>
        </div>
        <div id="leaderboard-list">
            <!-- Dynamically populated -->
        </div>
    </div>
    
    <!-- Keyboard Shortcuts Help -->
    <div id="shortcuts-help">
        <div class="shortcut"><kbd>Space</kbd> Pause/Play</div>
        <div class="shortcut"><kbd>‚Üê‚Üí</kbd> Switch Driver</div>
        <div class="shortcut"><kbd>C</kbd> Cycle Camera</div>
        <div class="shortcut"><kbd>1-6</kbd> Select Driver</div>
        <div class="shortcut"><kbd>+/-</kbd> Speed</div>
        <div class="shortcut"><kbd>H</kbd> Hide UI</div>
    </div>
    
    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="main.js?v=4"></script>
</body>
</html>
